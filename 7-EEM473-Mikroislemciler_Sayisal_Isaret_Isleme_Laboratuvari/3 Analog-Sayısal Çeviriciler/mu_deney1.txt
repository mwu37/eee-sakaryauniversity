#include 	<aduc841.h>
BTN4 	EQU 	P3.2H
	ORG 	00H
	SJMP 	BASLA
BASLA:
	MOV 	ADCCON1,#10011100B ;ADC POWER ON , DAHILI REF , MCLK = 4
	MOV 	ADCCON2,#00H	   ;ADC0 KANALI SECILDI
	MOV 	DACCON,#01001101B  ;DAC0 12-BIT , DAHILI REF 2.5V

B1:	JB 		BTN4,B1
	ACALL 	BEKLE
B0: JNB 	BTN4,B0

	CLR 	ADCI 				;ADC KESME BAYRAGI TEMIZLE
	SETB 	SCONV 				;ADC CEVRIMI BASLA TEK CEVRIM
	
DUR:JNB 	ADCI,DUR 			;ADC CEVRIMININ TAMMAMLANMASINI BEKLE
	
	MOV 	DAC0H,ADCDATAH
	MOV 	DAC0L,ADCDATAL
	SJMP 	B1
	
BEKLE:
	MOV 	41H,#0FFH
X0:	MOV 	40H,#0FFH
X1: DJNZ 	40H,X1
	DJNZ 	41H,X0
	RET
	
	END