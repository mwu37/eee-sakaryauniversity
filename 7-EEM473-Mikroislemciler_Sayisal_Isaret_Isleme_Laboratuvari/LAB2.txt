#include "ADUC841.H"

BT4	 EQU P3.2
BT5  EQU P3.3
LED3 EQU P0.2

ORG  0000H
SJMP BASLA
ORG  0003H
SJMP HARICI

;-----------
BASLA:
CLR P2.3
MOV P0, #00H
MOV R0, #07FH
RAM_TEMIZLE:
MOV @R0, #00H
DJNZ R0, RAM_TEMIZLE
SETB IT0
SETB EX0
SETB EA
MOV TMOD, #01H
BASLA2:
MOV R0, #169D
SETB EA
JB BT5, $
JNB BT5, $
MOV R1, A
MOV A, #00H

CLR EA
;---------

X: 
SETB LED3
ACALL BEKLE
CLR LED3
ACALL BEKLE
DJNZ R1, X
SJMP BASLA2

BEKLE:
MOV R0, #169D
SETB TR0
Y:JNB TF0, $
CLR TF0	
MOV TH0, #00H
MOV TL0, #00H
DJNZ R0, Y
CLR TR0
RET

HARICI:
//ACALL GECIKME
JNB BT4, $
INC A
RETI

/*GECIKME:
MOV R4, #10D
MOV R5, #0FFH
MOV R6, #0FFH
Z:DJNZ R5, Z
MOV R5, #0FFH
DJNZ R6, Z
MOV R6, #0FFH
DJNZ R4,X
RET
*/
END
	
	