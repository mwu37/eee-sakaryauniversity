	#include <aduc841.h>
DTMF1 		EQU 	20H
DTMF9 		EQU 	21H
DTMF_1VERI 	EQU 	22H
DTMF_9VERI 	EQU 	23H
SIN_Y3HB	EQU 	24H
SIN_Y3LB 	EQU 	25H
BUTON_SAY	EQU 	26H
BUTON 		EQU 	P2.1
GECIKME 	EQU 	27H
GECIKME2	EQU 	28H
	CSEG
	ORG 	00H
	SJMP 	MAIN
	ORG 	0BH
	LJMP 	TIMER0_KESME
MAIN:
	MOV 	SP,#070H
	MOV 	DACCON,#01111111B
	MOV 	DAC0H,#00H
	MOV 	DAC0L,#00H
	MOV 	TMOD,#00000010B
	MOV 	TL0,#024H
	MOV 	TH0,#024H
	SETB 	IE.7
	SETB 	IE.1
	MOV 	DTMF1,#00H
	MOV 	DTMF9,#00H
	MOV 	BUTON_SAY,#00H
	SETB 	BUTON
	
	MOV 	DPTR,#DTMF_1_VERI
	MOV 	A,#00H
	MOVC 	A,@A+DPTR
	MOV 	DTMF_1VERI,A
	
	MOV 	DPTR,#DTMF_9_VERI
	MOV 	A,#00H
	MOVC 	A,@A+DPTR
	MOV 	DTMF_9VERI,A
	
	SETB 	TCON.4
BEKLE_ON:
	JB 		P2.1,BEKLE_ON
	ACALL 	BEKLE
BEKLE_OFF:
	JNB 	BUTON,BEKLE_ON
	ACALL 	BEKLE
	INC 	BUTON_SAY
	MOV 	A,BUTON_SAY
	CJNE 	A,#02H,BEKLE_ON
	MOV 	BUTON_SAY,#00H
	SJMP 	BEKLE_ON
BEKLE:
	MOV 	GECIKME,#01H
	MOV 	GECIKME2,#015H
ZMN_AS:
	MOV 	A,GECIKME
	CJNE 	A,#00H,ZMN_AS
	MOV 	GECIKME,#01H
	DJNZ 	GECIKME2,ZMN_AS
	RET
	
TIMER0_KESME:
	MOV 	A,BUTON_SAY
	CJNE 	A,#00H,DTMF9_
	ACALL 	A1_DTMF_1
	SJMP 	ADA_DEVAM
DTMF9_:
	ACALL 	A1_DTMF_9
ADA_DEVAM:
	INC 	GECIKME
X1:
	MOV 	DAC0H,SIN_Y3HB
	MOV 	DAC0L,SIN_Y3LB
	RETI
	
A1_DTMF_1:
	MOV 	DPTR,#DTMF_1
	MOV 	A,DTMF1
	MOVC 	A,@A+DPTR
	MOV 	SIN_Y3HB,A
	INC 	DTMF1
	MOV 	A,DTMF1
	MOVC 	A,@A+DPTR
	MOV 	SIN_Y3LB,A
	
	INC 	DTMF1
	MOV 	A,DTMF1
	CLR 	C
	SUBB 	A,DTMF_1VERI
	JC 		AD_DTMF1
	MOV 	DTMF1,#00H
AD_DTMF1:
	RET
	
A1_DTMF_9:
	MOV 	DPTR,#DTMF_9
	MOV 	A,DTMF9
	MOVC 	A,@A+DPTR
	MOV 	SIN_Y3HB,A
	INC 	DTMF9
	MOV 	A,DTMF9
	MOVC 	A,@A+DPTR
	MOV 	SIN_Y3LB,A
	
	INC 	DTMF9
	MOV 	A,DTMF9
	CLR 	C
	SUBB 	A,DTMF_9VERI
	JC 		AD_DTMF9
	MOV 	DTMF9,#00H
AD_DTMF9:
	RET
	
DTMF_1_VERI:
	DB 		0x08E
DTMF_1:
	DW 		0x3D6, 0x49A, 0x55A, 0x614, 0x6C3, 0x766, 0x7F9, 0x879, 0x8E6, 0x93D, 0x97D, 0x9A6, 0x9B6, 0x9AF
	DW 		0x991, 0x95D, 0x914, 0x8B9, 0x84D, 0x7D4, 0x750, 0x6C4, 0x633, 0x59F, 0x50C, 0x47D, 0x3F5, 0x375
	DW		0x301, 0x299, 0x240, 0x1F6, 0x1DB, 0x194, 0x17B, 0x173, 0x17A, 0x18E, 0x1AE, 0x1D9, 0x20D, 0x246
	DW		0x283, 0x2C2, 0x2FF, 0x339, 0x36E, 0x39C, 0x3C0, 0x3DA, 0x3E8, 0x3EA, 0x3E0, 0x3C8, 0x3A5, 0x376
	DW 		0x33C, 0x2FA, 0x2B1, 0x263, 0x212, 0x1C1, 0x172, 0x127, 0x0E4, 0x0AA, 0x07C, 0x05B, 0x04A, 0x04A
	DW 		0x3D6
DTMF_9_VERI:
	DB 		0x074
DTMF_9:
	DW 		0x3D6, 0x4C5, 0x5AD, 0x68A, 0x754, 0x808, 0x8A0, 0x919, 0x971, 0x9A6, 0x9B7, 0x9A5, 0x971, 0x91E
	DW 		0x8AE, 0x827, 0x78D, 0x6E5, 0x634, 0x57F, 0x4CD, 0x422, 0x384, 0x2F5, 0x27A, 0x215, 0x1C7, 0x193
	DW 		0x177, 0x172, 0x184, 0x1A8, 0x1DC, 0x21D, 0x265, 0x2B1, 0x2FD, 0x343, 0x381, 0x3B3, 0x3D6, 0x3E8
	DW		0x3E8, 0x3D5, 0x3AF, 0x377, 0x331, 0x2DD, 0x281, 0x21F, 0x1BC, 0x15C, 0x105, 0x0BA, 0x07F, 0x059
	DW 		0x3D6, 0x4C5
	
	END

	DB 		048H, 08BH, 0B6H, 09EH, 0C5H, 0BEH, 065H, 097H, 0C8H, 0B2H, 02FH, 0ACH, 03DH, 075H, 00DH, 0C2H, 070H, 015H    	
	DB		0BFH, 02EH, 06BH, 042H, 090H, 051H, 08AH, 048H, 08BH, 0B6H, 09EH, 0C5H, 0BEH, 065H, 097H, 0C8H, 0B2H, 02FH	
	DB		0ACH, 03DH, 075H, 00DH, 0C2H, 070H, 015H, 0BFH, 02EH, 06BH, 042H, 090H, 051H, 08AH, 048H, 08BH
	DB		0B6H, 09EH, 0C5H, 0BEH, 065H, 097H, 0C8H, 0B2H, 02FH, 0ACH, 03DH, 075H, 00DH, 0C2H, 070H, 015H
	DB		0BFH, 02EH, 06BH, 042H, 090H, 051H, 08AH, 048H, 08BH, 0B6H, 09EH, 0C5H, 0BEH, 065H, 097H, 0C8H, 0B2H
	DB		02FH, 0ACH, 03DH, 075H, 00DH, 0C2H, 070H, 015H, 0BFH, 02EH, 06BH, 042H, 090H, 051H, 08AH, 048H, 08BH, 0B6H
	DB		09EH, 0C5H, 0BEH, 065H, 097H, 0C8H, 0B2H, 02FH, 0ACH, 03DH, 075H, 00DH, 0C2H, 070H, 015H
	DB		0BFH, 02EH, 06BH, 042H, 090H, 051H, 08AH, 048H, 08BH, 0B6H, 09EH, 0C5H, 0BEH, 065H, 097H, 0C8H
	DB		0B2H, 02FH, 0ACH, 03DH, 075H, 00DH, 0C2H, 070H, 015H, 0BFH, 02EH, 06BH, 042H, 090H, 051H, 08AH
	DB		048H, 08BH, 0B6H, 09EH, 0C5H, 0BEH, 065H, 097H, 0C8H, 0B2H, 02FH, 0ACH, 03DH, 075H, 00DH, 0C2H, 070H, 015H
	DB		0BFH, 02EH, 06BH, 042H, 090H, 051H, 08AH, 048H, 08BH, 0B6H, 09EH, 0C5H, 0BEH, 065H, 097H, 0C8H, 0B2H, 02FH
	DB		0ACH, 03DH, 075H, 00DH, 0C2H, 070H, 015H, 0BFH, 02EH, 06BH, 042H, 090H, 051H, 08AH, 048H, 08BH, 0B6H, 09EH
	DB		0C5H, 0BEH, 065H, 097H, 0C8H, 0B2H, 02FH, 0ACH, 03DH, 075H, 00DH, 0C2H, 070H, 015H, 0BFH, 02EH, 06BH, 042H, 090H, 051H, 08AH
	DB		048H, 08BH, 0B6H, 09EH, 0C5H, 0BEH, 065H, 097H, 0C8H, 0B2H, 02FH, 0ACH, 03DH, 075H, 00DH, 0C2H, 070H
	