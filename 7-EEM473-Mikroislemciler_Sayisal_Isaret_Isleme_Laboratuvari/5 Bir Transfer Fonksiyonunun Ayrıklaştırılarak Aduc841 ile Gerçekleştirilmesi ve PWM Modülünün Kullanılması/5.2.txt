#include<Aduc841.h>
;------------------

KATSAYI_0L EQU 20H
KATSAYI_0H EQU 21H

KATSAYI_1L EQU 22H
KATSAYI_1H EQU 23H

CSEG

ORG 00H
SJMP MAIN
Org 0003h
Sjmp ext_0

MAIN:
Setb ea
Setb ex0
MOV SP, #070H
MOV PWMCON, #00010011B

MOV KATSAYI_1L, #00H
MOV KATSAYI_1H, #0D8H
BEKLE:
Jz doksan
Cine a,#01h,yetmis
Cine a,#02h,elli
Yetmis:
MOV KATSAYI_0L, #00H
MOV KATSAYI_0H, #0a2H
ACALL PWM_CIKIS_VER
SJMP BEKLE 
Elli:
MOV KATSAYI_0L, #00H
MOV KATSAYI_0H, #6cH
ACALL PWM_CIKIS_VER
SJMP BEKLE 
doksan:
MOV KATSAYI_0L, #67H
MOV KATSAYI_0H, #0c2H
ACALL PWM_CIKIS_VER
SJMP BEKLE  
;-----------------------
PWM_CIKIS_VER:
MOV CFG841, #00H

MOV PWM0L, KATSAYI_0L
MOV PWM1L, KATSAYI_1L
MOV PWM0H, KATSAYI_0H
MOV PWM1H, KATSAYI_1H
RET

ext_0:
Cine a,#02h,devam
Clr a
reti
Devam:
Inc a
Reti

END
